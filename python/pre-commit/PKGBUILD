# POWER Maintainer: Alexander Baldeck <alex.bldck@gmail.com>
# Maintainer: Andreas 'Segaja' Schleifer <segaja at archlinux dot org>

pkgname='pre-commit'
pkgver=4.3.0
pkgrel=1
pkgdesc="A framework for managing and maintaining multi-language pre-commit hooks"
url="https://github.com/pre-commit/pre-commit"
license=('MIT')
arch=('any')
depends=(
  python-cfgv
  python-identify
  python-nodeenv
  python-toml
  python-virtualenv
  python-yaml
)
makedepends=(
  python-setuptools
)
provides=(
  python-pre-commit
)
replaces=(
  python-pre-commit
)
source=("https://github.com/pre-commit/pre-commit/archive/v$pkgver/$pkgname-$pkgver.tar.gz")
sha512sums=('efd39bdd73a9f759e12641df0b670729daf0bea671652ea850a99ff9633db2278b848f1a1c8464e9d5f2ceeea6006c56ccff699678380b79eb209acf1655370f')
b2sums=('499f667b0bcc7fdd3710b73d6a96002772c166714686ce5da67de1ed4f5dd646c027eb1a9f227d744f1b22cbdc42f438608cf72c7a597a2826db95c33be76dfb')

build() {
  cd pre-commit-$pkgver
  python setup.py build
}

package() {
  cd pre-commit-$pkgver
  python setup.py install --root="$pkgdir" --optimize=1

  install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
}
