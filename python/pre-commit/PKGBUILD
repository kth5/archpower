# POWER Maintainer: Alexander Baldeck <alex.bldck@gmail.com>
# Maintainer: Andreas 'Segaja' Schleifer <segaja at archlinux dot org>

pkgname='pre-commit'
pkgver=4.5.1
pkgrel=1
pkgdesc="A framework for managing and maintaining multi-language pre-commit hooks"
url="https://github.com/pre-commit/pre-commit"
license=('MIT')
arch=(any)
depends=(
  python-cfgv
  python-identify
  python-nodeenv
  python-toml
  python-virtualenv
  python-yaml
)
makedepends=(
  python-build
  python-installer
  python-wheel
)
provides=(
  python-pre-commit
)
replaces=(
  python-pre-commit
)
source=("https://github.com/pre-commit/pre-commit/archive/v$pkgver/$pkgname-$pkgver.tar.gz")
sha512sums=('9600b09e10a4811886849ad881a3584c66a5f8a5ae217ef13e373df7fe78c2b5e72d7c9ae40c2174bda520a24c8bd26280c4292a3c500b2dd5879229c9a9a9fb')
b2sums=('416e842a618fda5d32ef8b40d9b9ea9ec181a1c915493c6647429229b361bf6138a8730016103a9772d11324c3e0503592c65aed5f8174e2d1397abc9d83cee4')

build() {
  cd pre-commit-$pkgver
  python -m build --wheel --no-isolation
}

package() {
  cd pre-commit-$pkgver
  python setup.py install --root="$pkgdir" --optimize=1

  install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
}
