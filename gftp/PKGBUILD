# ArchPOWER maintainer: Kovács Dávid-István <davidkovacs578@gmail.com>
# AUR contributor: Lucien Immink <l.immink@student.fnt.hvu.nl>

pkgname=gftp
pkgver=2.9.1b
pkgrel=6
pkgdesc="A multithreaded ftp client for X Windows"
arch=(powerpc powerpc64 powerpc64le espresso)
url="https://www.gftp.org/"
license=('MIT')
depends=('gtk2' 'openssl' 'readline')
makedepends=('intltool')
source=("gftp-$pkgver.tgz::https://github.com/masneyb/gftp/archive/refs/tags/$pkgver.tar.gz"
        "gtk-too-many-arguments.patch")
sha256sums=('fb134d5479a6b81251b9d37be7264fb8be6edb07bce98569e0e0ba9570587fd6'
            '6cf2181983a200a7fa854b82c6a5940c798b583fff83c142d07f7524c1d72d13')

build() {
   CFLAGS+=' -Wno-error=incompatible-pointer-types' 
   patch -p2 < "${srcdir}"/gtk-too-many-arguments.patch 
   cd "$srcdir/$pkgname-$pkgver"
   autopoint
   ./autogen.sh
   ./configure --prefix=/usr --mandir=/usr/share/man --enable-gtk2
   make
}

package() {
   cd "$srcdir/$pkgname-$pkgver"
   make DESTDIR="$pkgdir" install
   install -vDm 644 "LICENSE" -t "${pkgdir}/usr/share/licenses/${pkgname}/"
}

